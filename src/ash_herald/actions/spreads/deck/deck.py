import random
import logging

logger = logging.getLogger('DECK')

TAROT_CARDS = [
    # Старшие арканы
    (1, "Маг"), (2, "Верховная Жрица"), (3, "Императрица"), 
    (4, "Император"), (5, "Верховный Жрец"), (6, "Влюблённые"),
    (7, "Колесница"), (8, "Сила"), (9, "Отшельник"), 
    (10, "Колесо Фортуны"), (11, "Справедливость"), (12, "Повешенный"),
    (13, "Смерть"), (14, "Умеренность"), (15, "Дьявол"), 
    (16, "Башня"), (17, "Звезда"), (18, "Луна"),
    (19, "Солнце"), (20, "Суд"), (21, "Мир"), (22, "Шут"),
    # Младшие арканы - Жезлы
    (23, "Туз Жезлов"), (24, "Двойка Жезлов"), (25, "Тройка Жезлов"),
    (26, "Четвёрка Жезлов"), (27, "Пятерка Жезлов"), (28, "Шестёрка Жезлов"),
    (29, "Семёрка Жезлов"), (30, "Восьмёрка Жезлов"), (31, "Девятка Жезлов"),
    (32, "Десятка Жезлов"), (33, "Паж Жезлов"), (34, "Рыцарь Жезлов"),
    (35, "Королева Жезлов"), (36, "Король Жезлов"),
    # Младшие арканы - Кубки
    (37, "Туз Кубков"), (38, "Двойка Кубков"), (39, "Тройка Кубков"),
    (40, "Четвёрка Кубков"), (41, "Пятерка Кубков"), (42, "Шестёрка Кубков"),
    (43, "Семёрка Кубков"), (44, "Восьмёрка Кубков"), (45, "Девятка Кубков"),
    (46, "Десятка Кубков"), (47, "Паж Кубков"), (48, "Рыцарь Кубков"),
    (49, "Королева Кубков"), (50, "Король Кубков"),
    # Младшие арканы - Мечи
    (51, "Туз Мечей"), (52, "Двойка Мечей"), (53, "Тройка Мечей"),
    (54, "Четвёрка Мечей"), (55, "Пятерка Мечей"), (56, "Шестёрка Мечей"),
    (57, "Семёрка Мечей"), (58, "Восьмёрка Мечей"), (59, "Девятка Мечей"),
    (60, "Десятка Мечей"), (61, "Паж Мечей"), (62, "Рыцарь Мечей"),
    (63, "Королева Мечей"), (64, "Король Мечей"),
    # Младшие арканы - Пентакли
    (65, "Туз Пентаклей"), (66, "Двойка Пентаклей"), (67, "Тройка Пентаклей"),
    (68, "Четвёрка Пентаклей"), (69, "Пятерка Пентаклей"), (70, "Шестёрка Пентаклей"),
    (71, "Семёрка Пентаклей"), (72, "Восьмёрка Пентаклей"), (73, "Девятка Пентаклей"),
    (74, "Десятка Пентаклей"), (75, "Паж Пентаклей"), (76, "Рыцарь Пентаклей"),
    (77, "Королева Пентаклей"), (78, "Король Пентаклей")
]

LENORMAN_CARDS = [
    (1, "Всадник"), (2, "Клевер"), (3, "Корабль"), (4, "Дом"), (5, "Дерево"),
    (6, "Тучи"), (7, "Змея"), (8, "Гроб"), (9, "Букет"), (10, "Коса"),
    (11, "Метла"), (12, "Совы"), (13, "Ребенок"), (14, "Лиса"), (15, "Медведь"),
    (16, "Звезды"), (17, "Аист"), (18, "Собака"), (19, "Башня"), (20, "Сад"),
    (21, "Гора"), (22, "Развилка"), (23, "Крысы"), (24, "Сердце"), (25, "Кольцо"),
    (26, "Книга"), (27, "Письмо"), (28, "Мужчина"), (29, "Женщина"), (30, "Лилия"),
    (31, "Солнце"), (32, "Луна"), (33, "Ключ"), (34, "Рыбы"), (35, "Якорь"),
    (36, "Крест")
]

async def draw_cards(deck='tarot', count=1):
    logger.info(f"Received deck parameter: {deck}")

    if deck in ['tarot', 'deviant', 'muerte']:
        cards = TAROT_CARDS
        logger.info(f"Using tarot cards for deck: {deck}")
    elif deck == 'lenorman':
        cards = LENORMAN_CARDS
        logger.info(f"Using lenorman cards for deck: {deck}")
    else:
        logger.warning(f"Unknown deck type: {deck}, using tarot as fallback")
        cards = TAROT_CARDS
        deck = 'tarot'
    
    logger.info(f"deck selected: {deck}")

    if count <= 0:
        count = 1

    if count > len(cards):
        count = len(cards)
        
    logger.info(f"cards selected: {count}")

    selected = random.sample(cards, count)
    result = []

    for card_info in selected:
        number, name = card_info
        position = random.choice(["upright", "reversed"])
        
        result.append({
            'number': number,
            'name': name,
            'position': position,
            'deck': deck 
        })
    return result